"""
نمونه استفاده از FastMCP Server و Client

این فایل شامل دستورالعمل‌های استفاده از FastMCP است.
"""

# ============================================
# راه‌اندازی سرور FastMCP
# ============================================

"""
روش 1: اجرا در حالت Development (توصیه می‌شود)
-----------------------------------------------------
این روش برای توسعه مناسب است و تغییرات را به صورت خودکار reload می‌کند.

دستور:
    uv run mcp dev app/mcp_server/fastmcp_server

مزایا:
    - Hot reload: تغییرات کد به صورت خودکار اعمال می‌شود
    - Debug mode: پیام‌های خطا واضح‌تر هستند
    - Fast iteration: نیازی به restart ندارید


روش 2: اجرا به صورت مستقیم
-----------------------------------------------------
دستور:
    uv run python app/mcp_server/fastmcp_server.py
"""


# ============================================
# استفاده از کلاینت FastMCP
# ============================================

"""
اجرای کلاینت تعاملی:
-----------------------------------------------------
دستور:
    uv run python app/mcp_client/fastmcp_client.py

این کلاینت به صورت خودکار به سرور FastMCP متصل می‌شود و
یک رابط تعاملی CLI برای کار با تسک‌ها فراهم می‌کند.
"""


# ============================================
# نمونه دستورات کلاینت
# ============================================

"""
دستورات فارسی:
-----------------------------------------------------
- لیست تسک‌ها رو نشون بده
- لیست pending رو نشون بده
- یک تسک جدید با عنوان "خرید نان" بساز
- وضعیت تسک 5 رو done کن
- جزئیات تسک 3
- تسک 2 رو حذف کن
- راهنما
- جریان کار
- روزانه


دستورات انگلیسی:
-----------------------------------------------------
- show all tasks
- list pending tasks
- create task with title "Buy groceries"
- update task 5 to done
- show task 3 details
- delete task 2
- help
- workflow
- daily
"""


# ============================================
# استفاده از Prompts
# ============================================

"""
FastMCP Server شامل 4 prompt مفید است:

1. task_management_guide
   - راهنمای جامع مدیریت تسک‌ها
   - توضیح تمام عملیات
   - بهترین روش‌ها
   
   دستور کلاینت: help یا راهنما


2. task_status_workflow
   - توضیح چرخه عمر وضعیت‌ها
   - نمودار تبدیل وضعیت‌ها
   - نمونه‌های کاربردی
   
   دستور کلاینت: workflow یا جریان کار


3. create_task_template
   - الگوی ایجاد تسک با ساختار کامل
   - معیارهای پذیرش
   - نکات مهم
   
   استفاده: از طریق سیستم‌های پشتیبانی MCP


4. daily_task_summary
   - الگوی بررسی روزانه تسک‌ها
   - برنامه‌ریزی صبح و عصر
   - دستورات مفید
   
   دستور کلاینت: daily یا روزانه
"""


# ============================================
# Tools موجود
# ============================================

"""
FastMCP Server شامل 7 tool است:

1. list_tasks(status: Optional[str] = None)
   - لیست تمام تسک‌ها
   - فیلتر بر اساس وضعیت (اختیاری)
   - مثال: list_tasks(status="pending")


2. get_task_by_id(task_id: int)
   - دریافت جزئیات یک تسک خاص
   - مثال: get_task_by_id(task_id=5)


3. create_task(title: str, description: Optional[str] = None, status: str = "pending")
   - ایجاد تسک جدید
   - مثال: create_task(title="خرید نان", status="pending")


4. update_task(task_id: int, title: Optional[str] = None, description: Optional[str] = None, status: Optional[str] = None)
   - بروزرسانی کامل تسک
   - می‌توان یک یا چند فیلد را تغییر داد
   - مثال: update_task(task_id=3, title="عنوان جدید", status="done")


5. update_task_status(task_id: int, status: str)
   - بروزرسانی سریع وضعیت
   - مثال: update_task_status(task_id=5, status="done")


6. delete_task(task_id: int)
   - حذف تسک
   - مثال: delete_task(task_id=7)


وضعیت‌های مجاز:
   - pending (شروع نشده)
   - in_progress (در حال انجام)
   - done (انجام شده)
"""


# ============================================
# نکات مهم
# ============================================

"""
1. Database Initialization:
   سرور FastMCP به صورت خودکار دیتابیس را initialize می‌کند.
   نیازی به اجرای دستور جداگانه نیست.


2. Error Handling:
   خطاها به صورت ساده و قابل فهم برگردانده می‌شوند:
   {"error": "Task with id 5 not found"}


3. Type Safety:
   تمام توابع از type hints استفاده می‌کنند و Pydantic
   validation را انجام می‌دهند.


4. Development Workflow:
   - سرور را در یک ترمینال با mcp dev اجرا کنید
   - کلاینت را در ترمینال دیگر اجرا کنید
   - تغییرات سرور به صورت خودکار reload می‌شود


5. Production Use:
   برای استفاده در production، می‌توانید از MCP Server
   به صورت مستقیم استفاده کنید و آن را در پشت یک
   service manager مانند systemd قرار دهید.
"""


# ============================================
# مقایسه با MCP Standard
# ============================================

"""
مزایای FastMCP نسبت به MCP Standard:

✅ کد کمتر (حدود 40% کمتر)
✅ خواناتر و قابل نگهداری‌تر
✅ Type safety بهتر
✅ پشتیبانی از Prompts
✅ Development mode با hot reload
✅ خطایابی آسان‌تر
✅ مستندسازی خودکار
✅ سینتکس ساده‌تر با دکوراتورها

اما MCP Standard همچنان برای موارد زیر مفید است:
- کنترل دقیق‌تر روی protocol
- استفاده از ویژگی‌های پیشرفته MCP
- سازگاری با سیستم‌های legacy
"""
